CREATE DATABASE COMPRA_VENTA_AUTOS;
USE COMPRA_VENTA_AUTOS;

	
CREATE DATABASE COMPRA_VENTA_AUTOS;
USE COMPRA_VENTA_AUTOS;

	CREATE TABLE COMPRA_VENTA_AUTOS.CLIENTES(
	ID_CLIENTE	INT NOT NULL AUTO_INCREMENT 
	,NOMBRE	VARCHAR(20) NOT NULL
	,APELLIDO	VARCHAR(20) NOT NULL
	,DNI	INT NOT NULL
	,DIRECCION	VARCHAR(50) NOT NULL
	,CP	VARCHAR(10) NOT NULL
	,MAIL	VARCHAR(50) NOT NULL
	,PRIMARY KEY (ID_CLIENTE)
	);
    
        CREATE TABLE COMPRA_VENTA_AUTOS.AUTOS(
	ID_AUTO	INT NOT NULL AUTO_INCREMENT
	,PATENTE	VARCHAR(7) NOT NULL
	,ID_MARCA_MODELO	INT NOT NULL
	,ANO INT NOT NULL
	,TRANSMISION VARCHAR(20) NOT NULL
    ,COLOR VARCHAR(20)
	,PRIMARY KEY (ID_AUTO)
	);
    
        CREATE TABLE COMPRA_VENTA_AUTOS.MARCA_MODELO(
	ID_MARCA_MODELO	INT NOT NULL 
	,MARCA VARCHAR(20) NOT NULL
	,MODELO VARCHAR(20) NOT NULL
	,PRIMARY KEY (ID_MARCA_MODELO)


	);
    
	CREATE TABLE COMPRA_VENTA_AUTOS.TELEFONOS_CLIENTES(
    ID_CLIENTE	INT NOT NULL
	,TELEFONO_PRINCIPAL BIGINT NOT NULL
    ,TELEFONO_SECUNDARIO BIGINT
	,PRIMARY KEY (ID_CLIENTE)
	,FOREIGN KEY (ID_CLIENTE) REFERENCES COMPRA_VENTA_AUTOS.CLIENTES(ID_CLIENTE)
	);
    
	CREATE TABLE COMPRA_VENTA_AUTOS.STATUS_OTS(
	ID_STATUS	INT  NOT NULL  AUTO_INCREMENT
	,ESTATUS	VARCHAR(50)  NOT NULL
	,DESCRIPCION_STATUS	VARCHAR(100)
	,PRIMARY KEY (ID_STATUS)
    );
    
     
	CREATE TABLE COMPRA_VENTA_AUTOS.MECANICOS(
	ID_MECANICO	INT  NOT NULL  AUTO_INCREMENT
	,NOMBRE	VARCHAR(20) NOT NULL
	,APELLIDO	VARCHAR(20) NOT NULL
	,DNI	INT NOT NULL
	,LEGAJO	INT NOT NULL
	,TELEFONO BIGINT NOT NULL
	,DIRECCION	VARCHAR(50) NOT NULL
	,CP	VARCHAR(10) NOT NULL
	,MAIL	VARCHAR(50) NOT NULL
	,PRIMARY KEY (ID_MECANICO)
    );
    
	
  
	CREATE TABLE COMPRA_VENTA_AUTOS.SECTOR(
	ID_SECTOR	INT  NOT NULL  AUTO_INCREMENT
	,SECTOR	VARCHAR(100)  NOT NULL
	,DESCRIPCION	VARCHAR(100) 
	,PRIMARY KEY (ID_SECTOR)
    );
    
    	CREATE TABLE COMPRA_VENTA_AUTOS.POLIVALENCIA(
	ID_POLIVALENCIA INT  NOT NULL  AUTO_INCREMENT
    ,ID_MECANICO	INT  NOT NULL
	,ID_SECTOR	INT NOT NULL
	,PRIMARY KEY (ID_POLIVALENCIA)
	,FOREIGN KEY (ID_MECANICO) REFERENCES COMPRA_VENTA_AUTOS.MECANICOS(ID_MECANICO)
    ,FOREIGN KEY (ID_SECTOR) REFERENCES COMPRA_VENTA_AUTOS.SECTOR(ID_SECTOR)
    );

    CREATE TABLE COMPRA_VENTA_AUTOS.CATEGORIAS(
	ID_CATEGORIA INT  NOT NULL  AUTO_INCREMENT
	,NOMBRE	VARCHAR(50)  NOT NULL
	,ID_SECTOR INT NOT NULL
    ,PRIMARY KEY (ID_CATEGORIA)
	,FOREIGN KEY (ID_SECTOR) REFERENCES COMPRA_VENTA_AUTOS.SECTOR(ID_SECTOR)
    );
    
    CREATE TABLE COMPRA_VENTA_AUTOS.GRUPO(
	ID_GRUPO_TRABAJO	INT  NOT NULL  AUTO_INCREMENT
	,ID_CATEGORIA	INT  NOT NULL
	,NOMBRE	VARCHAR(50)  NOT NULL
	,PRIMARY KEY (ID_GRUPO_TRABAJO)

    );
    
    create TABLE COMPRA_VENTA_AUTOS.COMPRAS(
	ID_COMPRA INT NOT NULL AUTO_INCREMENT 
	,ID_CLIENTE INT NOT NULL
	,ID_AUTO	INT NOT NULL
    ,FECHA_CONTRATO DATETIME NOT NULL
    ,FECHA_ALTA_SISTEMA DATETIME NOT NULL
    ,MONTO VARCHAR(20) NOT NULL
	,PRIMARY KEY (ID_COMPRA)
	,FOREIGN KEY (ID_AUTO) REFERENCES COMPRA_VENTA_AUTOS.AUTOS(ID_AUTO)
	);
	 
    
	CREATE TABLE COMPRA_VENTA_AUTOS.OTS(
	ID_AUTO	INT NOT NULL
	,ID_OT	INT NOT NULL AUTO_INCREMENT
	,DESCRIPCION_OT	VARCHAR(100)
	,ID_SECTOR INT NOT NULL
    ,ID_CATEGORIA INT NOT NULL
    ,ID_GRUPO_TRABAJO INT NOT NULL
    ,ID_STATUS_OT INT NOT NULL
	,PRIMARY KEY (ID_OT)
	,FOREIGN KEY (ID_AUTO) REFERENCES COMPRA_VENTA_AUTOS.AUTOS(ID_AUTO)
    ,FOREIGN KEY (ID_GRUPO_TRABAJO) REFERENCES COMPRA_VENTA_AUTOS.GRUPO(ID_GRUPO_TRABAJO)
    ,FOREIGN KEY (ID_CATEGORIA) REFERENCES COMPRA_VENTA_AUTOS.CATEGORIAS(ID_CATEGORIA)
    ,FOREIGN KEY (ID_STATUS_OT) REFERENCES COMPRA_VENTA_AUTOS.STATUS_OTS(ID_STATUS)
    ,FOREIGN KEY (ID_SECTOR) REFERENCES COMPRA_VENTA_AUTOS.SECTOR(ID_SECTOR)
    );
    
   
    
	
	CREATE TABLE COMPRA_VENTA_AUTOS.EJECUCION_OTS(
	ID_EJECUCION INT NOT NULL AUTO_INCREMENT
    ,ID_OT INT NOT NULL
	,ID_MECANICO INT NOT NULL
    ,ID_SECTOR INT NOT NULL
	,PRIMARY KEY (ID_EJECUCION)
	,FOREIGN KEY (ID_OT) REFERENCES COMPRA_VENTA_AUTOS.OTS(ID_OT)
    ,FOREIGN KEY (ID_MECANICO) REFERENCES COMPRA_VENTA_AUTOS.MECANICOS(ID_MECANICO)
    ,FOREIGN KEY (ID_sector) REFERENCES COMPRA_VENTA_AUTOS.sector(ID_sector)
    );


    

